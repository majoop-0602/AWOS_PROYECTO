<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Usuarios</title>

     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous" defer></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="js/main.js" defer></script>
</head>
<body>
    
    <div class="container text-center p-3 my-2" >
            <h1 class="mt-4 mb-4" style="text-align: center;">¡Bienvenido de nuevo!</h1>
            <a href="index_usuario.html" class="btn btn-info" style="align-items: center;">Comenzar</a>
    </div>
    <div id="divMapa" class="container text-center p-3 my-2">
            <h3 class="mt-4 mb-4" style="text-align: center;">Tu ubicación actual:</h3>
    </div>

            <script>
            const options = {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 0,
            }

            function generarMapa(longitud, latitud) {
                $("#divMapa").append(`
                    <iframe 
                        width="100%" 
                        height="250" 
                        style="border:0;" 
                        loading="lazy" 
                        allowfullscreen 
                        src="https://maps.google.com/maps?q=${latitud},${longitud}&z=15&output=embed">
                    </iframe>
                `)
            }

            function success(pos) {
                const crd = pos.coords

                const longitud = crd.longitude
                const latitud = crd.latitude
                const precision = crd.accuracy

                console.log("Ubicación actual:")
                console.log(`Latitude : ${latitud}`)
                console.log(`Longitude: ${longitud}`)
                console.log(`Precisión: ${precision} metros`)

                generarMapa(longitud, latitud)

                $("#hidLatitud").val(latitud)
                $("#hidLongitud").val(longitud)
            }

            function error(err) {
                console.warn(`ERROR(${err.code}): ${err.message}`)
            }

            navigator.geolocation.getCurrentPosition(success, error, options)
            </script>

    
</body>